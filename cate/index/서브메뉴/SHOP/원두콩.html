<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" type="text/css" href="../../../css/쇼핑.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script type="text/javascript" src="../../../js/home.js"></script>
</head>

<body>
    <header>
        <div class="top">
            <ul>
                <li>
                    <div class="logo">
                        <a href="../../home.html">
                            <img src="../../../images/logo.png" alt="로고">
                        </a>
                    </div>
                </li>
                <li>
                    <nav class="menu">
                        <ul class="navi">
                            <li><a href="../인사말.html" onMouseOver='this.innerHTML="ABOUT"'
                                    onMouseOut='this.innerHTML="인사말"'>인사말</a></li>
                            <li class="active"><a href="../쇼핑.html" onMouseOver='this.innerHTML="SHOP"'
                                    onMouseOut='this.innerHTML="쇼핑"'>쇼핑</a></li>
                            <li><a href="../오시는 길.html" onMouseOver='this.innerHTML="WAY TO COME"'
                                    onMouseOut='this.innerHTML="오시는 길"'>오시는 길</a></li>
                            <li><a href="../메뉴판.html" onMouseOver='this.innerHTML="MENU"'
                                    onMouseOut='this.innerHTML="메뉴"'>메뉴</a></li>
                            <li><a href="../게시판.html" onMouseOver='this.innerHTML="COMMUNITY"'
                                    onMouseOut='this.innerHTML="커뮤니티"'>커뮤니티</a></li>
                            <ul class="submenu">
                                <li><a href="../게시판.html">게시판</a></li>
                                <li><a href="../공지사항.html">공지사항</a></li>
                                <li><a href="../Q&A.html">Q&A</a></li>
                                <li><a href="../행사&교육.html">행사&교육</a></li>
                            </ul>
                        </ul>
                    </nav>
                </li>
                <li class="login">
                    <a href="../../가입/membership.html">로그인/회원가입</a>
                </li>
            </ul>
        </div>
    </header>
    <div class="wrap">
        <div class="contents-shop">
            <div class="imgshop">
                <img src="../../../images/원두콩.png">
            </div>
            <div class="detail">
                <div class="infoArea">
                    <h2 class="title">[갤러리 앨리스] 10월 원두콩</h2>
                    <span class="notes">
                        <em class="noteTit">
                            "500g 31,000원"
                        </em>
                    </span>
                    <em class="price">31,000원</em>
                </div>
                <div class="subInfo">
                    <dl class="infoList togType2">
                        <dt class>로스팅</dt>
                        <dd class>2023.10.04</dd>
                        <dt class>배송안내</dt>
                        <dd>
                            <p class="fs">예약 배송 상품과 일반 상품을 같이 구매하는 경우 예약 발송일에 함께 발송됩니다.</p>
                        </dd>
                        <dd>
                            <p class="fs">상품별 출고예정일이 다를시 가장 늦은 상품 기준으로 모두 함께 배송됩니다.</p>
                        </dd>
                        <div class="optionList togType2">
                            <dt class="sltTitle">분쇄</dt>
                            <dd>
                                <div id="crushOptionWrapper">
                                    <select id="crushOptionSelect" class="select-option">
                                        <option hidden>선택</option>
                                        <option value="갈지않음">갈지않음</option>
                                        <option value="에스프레소">에스프레소</option>
                                        <option value="모카포트&더치">모카포트&더치</option>
                                        <option value="드립&커피메이커">드립&커피메이커</option>
                                        <option value="프렌치프레소">프렌치프레소</option>
                                    </select>
                                </div>
                            </dd>
                            <dt class="sltBody"  id="weightText" style="display: none;"><br>중량</dt>
                            <dd>
                                <div id="weightOptionWrapper" style="display: none;">
                                    <select id="weightOption" class="select-option">
                                        <option hidden>선택</option>
                                        <option value="500g">500g</option>
                                    </select>
                                </div>
                            </dd>
                        </div>
                    </dl>
                    <div id="slt" style="display: none;">
                        <div class="sltft">
                        </div>
                        <div class="slt-but">
                            <button id="decrementCount">-</button>
                            <span class="count">0</span>
                            <button id="incrementCount">+</button>
                        </div>
                        <a href class="slt-btn">
                            X
                        </a>
                        <div class="slt-price">
                            <span>31,000</span>원
                        </div>
                    </div>
                    <div id="shop-mon">
                        <div class="shop-money">
                            총 상품금액 <span>0</span> 원
                        </div>
                    </div>
                    <a href = "../../가입/membership.html" class="shop-pay">
                        구매하기
                    </a>
                    <a href class="shop-bask">
                        장바구니
                    </a>
                </div>
            </div>
        </div>
    </div>
    <footer>
        <div class="bottom">
            <div class="btlogo">
                <img src="../../../images/ftlogo.png" alt="하단로고">
            </div>
            <div class="copy">
                <ul>
                    <li>상호 : Gallery Alice | 대표 : Cute | 주소 : 광명시 경기도 광명시 <br>
                        사업자등록번호 : 123-45-67890 | 전화번호 : 전화번호 : 02-1234-1234 | 이메일 : qwer1234@naver.com
                    </li>
                    <div class="sns">
                        <li><a href="https://www.facebook.com/people/%EA%B0%A4%EB%9F%AC%EB%A6%AC%EC%95%A8%EB%A6%AC%EC%8A%A4/100069607637396/"
                                target="_blank">
                                <img src="../../../images/sns1.jpg" alt="sns1"></a></li>
                        <li><a href="https://cafegalleryalice.modoo.at/" target="_blank">
                                <img src="../../../images/sns2.png" alt="sns2"></a></li>
                        <li><a href="https://www.instagram.com/galleryalice_cafe/" target="_blank">
                                <img src="../../../images/sns3.jpg" alt="sns3"></a></li>
                    </div>
                </ul>
            </div>
            <div class="copye">
                Copyright ⓒ Gallery Alice All rights 20503 kim
            </div>
        </div>
    </footer>
    <script>
        // DOM 요소를 가져옵니다.
        const crushOptionSelect = document.getElementById('crushOptionSelect');
        const weightOptionSelect = document.getElementById('weightOption');
        const weightOptionWrapper = document.getElementById('weightOptionWrapper');
        const sltOptionSelect = document.getElementById('slt');
        const weightText = document.getElementById('weightText');
        const shopMoneyElement = document.querySelector('.shop-money');
        const sltftElement = document.querySelector('.sltft');
        const sltbutElement = document.querySelector('.slt-but');
        const sltbtnElement = document.querySelector('.slt-btn');
        const sltpriceElement = document.querySelector('.slt-price');
        const countElement = document.querySelector('.count'); // 카운트를 표시할 요소 추가
        const shopbaskElement = document.querySelector('.shop-bask');
    
        // 초기 가격 (500g의 가격)
        let basePrice = 0; // 31,000원
        let previousCrushOption = ''; // 이전 분쇄 옵션을 저장하는 변수
        let count = 1; // 카운팅 변수 초기화
    
        // 분쇄 옵션 선택 시 이벤트 리스너
        crushOptionSelect.addEventListener('change', function () {
            const selectedCrushOption = crushOptionSelect.value;
    
            // 분쇄 옵션을 선택했을 때 중량 옵션과 "중량" 텍스트를 보이거나 숨깁니다.
            if (selectedCrushOption !== '선택') {
                weightOptionWrapper.style.display = 'block';
                weightText.style.display = 'block';
            }
        });
    
        // 중량 옵션 선택 시 이벤트 리스너
        weightOptionSelect.addEventListener('change', function () {
            const selectedWeightOption = weightOptionSelect.value;
            const selectedCrushOption = crushOptionSelect.value;
    
            // 중량 옵션을 선택했을 때 분쇄 옵션을 "선택"으로 초기화하고 중량 옵션을 숨깁니다.
            if (selectedWeightOption !== '선택') {
                // 이전 분쇄 옵션과 현재 선택된 분쇄 옵션을 비교하여 동일한 경우에만 가격을 업데이트합니다.
                if (previousCrushOption === selectedCrushOption) {
                    alert("동일한 옵션이 존재합니다.");
                    sltOptionSelect.style.display = 'block';
                    sltbtnElement.style.display = 'block';
                    sltpriceElement.style.display = 'block';
                    sltftElement.style.display = 'block';
                    sltbutElement.style.display = 'block';
                    crushOptionSelect.value = '선택'; // 분쇄 옵션 초기화
                    weightOptionSelect.value = '선택'; // 중량 옵션 초기화
                    weightOptionWrapper.style.display = 'none';
                    weightText.style.display = 'none';
                } else {
                    sltOptionSelect.style.display = 'block';
                    sltftElement.style.display = 'block';
                    sltpriceElement.style.display = 'block';
                    sltbutElement.style.display = 'block';
                    sltbtnElement.style.display = 'block';
                    crushOptionSelect.value = '선택'; // 분쇄 옵션 초기화
                    weightOptionSelect.value = '선택'; // 중량 옵션 초기화
                    weightOptionWrapper.style.display = 'none';
                    weightText.style.display = 'none';
    
                    // 선택된 옵션에 따라 가격을 업데이트합니다.
                    updatePrice(selectedWeightOption);
                    updateSltftText(selectedCrushOption);
                    // 카운트 증가 및 표시
                    countElement.textContent = `${count}`;
                }
            }
        });
    
        // 가격을 업데이트하는 함수
        function updatePrice(selectedWeightOption) {
            // 여기에서 선택된 중량 옵션에 따라 가격을 업데이트할 수 있습니다.
            // 예를 들어, 500g의 경우 31000원을 유지한다고 가정하면:
            basePrice = 31000 * count;
    
            // 중량 옵션에 따라 가격을 업데이트합니다.
            // 업데이트된 가격을 표시합니다.
            shopMoneyElement.textContent = `총 상품금액 ${basePrice.toLocaleString('en-US', {
                style: 'currency',
                currency: 'KRW',
            })}`;
        }
    
        function updateSltftText(crushOption) {
            sltftElement.textContent = `[갤러리 앨리스] 10월 원두콩\n${crushOption} / 500g`;
            previousCrushOption = crushOption; // 분쇄 옵션 업데이트
        }
        // "-" 버튼 클릭 시 카운트 감소
        document.getElementById('decrementCount').addEventListener('click', function () {
            if (count > 1) {
                count--;
                updateCount();
            }
        });

        
        // "+" 버튼 클릭 시 카운트 증가
        document.getElementById('incrementCount').addEventListener('click', function () {
            count++;
            updateCount();
        });
        
        // 카운트를 업데이트하고 표시하는 함수
        function updateCount() {
            countElement.textContent = count;
            
            // 가격 업데이트
            const selectedWeightOption = weightOptionSelect.value;
            updatePrice(selectedWeightOption);
        }
    </script>
</body>

</html>
